<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Tr√¶ning af ordforr√•d br√∏ker(DA‚ÜíRU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* –∑–µ–ª—ë–Ω—ã–π */
.wrong { background-color: #f7c5c5; }   /* –∫—Ä–∞—Å–Ω—ã–π */
.wordSpan { margin-right: 3px; }
</style>
</head>
<body>
<h2>Tr√¶ning af ordforr√•d br√∏ker(DA‚ÜíRU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle overs√¶ttelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
  { da: "en halv", ru: "–ø–æ–ª–æ–≤–∏–Ω–∞", ex: "Jeg spiser ___ kage.", parts: ["en","halv"] },
  { da: "en tredjedel", ru: "–æ–¥–Ω–∞ —Ç—Ä–µ—Ç—å", ex: "Vi deler ___ pizza.", parts: ["en","tredjedel"] },
  { da: "to tredjedele", ru: "–¥–≤–µ —Ç—Ä–µ—Ç–∏", ex: "Hun bruger ___ af tiden.", parts: ["to","tredjedele"] },
  { da: "en fjerdedel", ru: "–æ–¥–Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç—å", ex: "Han drikker ___ liter m√¶lk.", parts: ["en","fjerdedel"] },
  { da: "tre fjerdedele", ru: "—Ç—Ä–∏ —á–µ—Ç–≤–µ—Ä—Ç–∏", ex: "Der er ___ af kagen tilbage.", parts: ["tre","fjerdedele"] },
  { da: "en femtedel", ru: "–æ–¥–Ω–∞ –ø—è—Ç–∞—è", ex: "Vi spiser ___ af pizzaen.", parts: ["en","femtedel"] },
  { da: "to femtedele", ru: "–¥–≤–µ –ø—è—Ç—ã—Ö", ex: "Han har ___ af pengene.", parts: ["to","femtedele"] },
  { da: "tre femtedele", ru: "—Ç—Ä–∏ –ø—è—Ç—ã—Ö", ex: "Hun drikker ___ af m√¶lken.", parts: ["tre","femtedele"] },
  { da: "fire femtedele", ru: "—á–µ—Ç—ã—Ä–µ –ø—è—Ç—ã—Ö", ex: "Der er ___ af vandet tilbage.", parts: ["fire","femtedele"] },
  { da: "en sjettedel", ru: "–æ–¥–Ω–∞ —à–µ—Å—Ç–∞—è", ex: "Vi deler ___ kage.", parts: ["en","sjettedel"] },
  { da: "to sjettedele", ru: "–¥–≤–µ —à–µ—Å—Ç—ã—Ö", ex: "Han har ___ af pengene.", parts: ["to","sjettedele"] },
  { da: "en syvendedel", ru: "–æ–¥–Ω–∞ —Å–µ–¥—å–º–∞—è", ex: "Hun spiser ___ af kagen.", parts: ["en","syvendedel"] },
  { da: "to syvendedele", ru: "–¥–≤–µ —Å–µ–¥—å–º—ã—Ö", ex: "Der er ___ tilbage.", parts: ["to","syvendedele"] },
  { da: "en ottendedel", ru: "–æ–¥–Ω–∞ –≤–æ—Å—å–º–∞—è", ex: "Vi drikker ___ af m√¶lken.", parts: ["en","ottendedel"] },
  { da: "tre ottendedele", ru: "—Ç—Ä–∏ –≤–æ—Å—å–º—ã—Ö", ex: "Han spiser ___ af pizzaen.", parts: ["tre","ottendedele"] },
  { da: "en nindedel", ru: "–æ–¥–Ω–∞ –¥–µ–≤—è—Ç–∞—è", ex: "Der er ___ af kagen tilbage.", parts: ["en","nindedel"] },
  { da: "to nindedele", ru: "–¥–≤–µ –¥–µ–≤—è—Ç—ã—Ö", ex: "Hun drikker ___ af saften.", parts: ["to","nindedele"] },
  { da: "en tiendedel", ru: "–æ–¥–Ω–∞ –¥–µ—Å—è—Ç–∞—è", ex: "Vi bruger ___ af tiden.", parts: ["en","tiendedel"] },
  { da: "tre tiendedele", ru: "—Ç—Ä–∏ –¥–µ—Å—è—Ç—ã—Ö", ex: "Han har ___ af pengene.", parts: ["tre","tiendedele"] },
  { da: "halvanden", ru: "–ø–æ–ª—Ç–æ—Ä–∞", ex: "Jeg har ___ liter m√¶lk.", parts: ["halvanden"] },
  { da: "to og en halv", ru: "–¥–≤–µ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Han drikker ___ glas vand.", parts: ["to","og","en","halv"] },
  { da: "tre og en halv", ru: "—Ç—Ä–∏ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Vi spiser ___ pizzaer.", parts: ["tre","og","en","halv"] },
  { da: "fire og en halv", ru: "—á–µ—Ç—ã—Ä–µ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Hun l√∏ber ___ kilometer.", parts: ["fire","og","en","halv"] },
  { da: "fem og en halv", ru: "–ø—è—Ç—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Jeg arbejder ___ timer.", parts: ["fem","og","en","halv"] },
  { da: "seks og en halv", ru: "—à–µ—Å—Ç—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Han l√¶ser ___ b√∏ger.", parts: ["seks","og","en","halv"] },
  { da: "syv og en halv", ru: "—Å–µ–º—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Der er ___ b√∏rn i klassen.", parts: ["syv","og","en","halv"] },
  { da: "otte og en halv", ru: "–≤–æ—Å–µ–º—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Vi spiser ___ kager.", parts: ["otte","og","en","halv"] },
  { da: "ni og en halv", ru: "–¥–µ–≤—è—Ç—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Han k√∏rer ___ kilometer.", parts: ["ni","og","en","halv"] },
  { da: "ti og en halv", ru: "–¥–µ—Å—è—Ç—å —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π", ex: "Hun har ___ penge.", parts: ["ti","og","en","halv"] }
];


const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");

  if (w.da.includes("...") && w.parts.length === 2) {
    const exParts = w.ex.split("___");
    
    const span1 = document.createElement("span");
    span1.textContent = exParts[0];
    exDiv.appendChild(span1);

    const input1 = document.createElement("input");
    input1.type = "text";
    input1.dataset.word = w.parts[0].toLowerCase();
    input1.className = "wordPart";
    exDiv.appendChild(input1);

    const spanMid = document.createElement("span");
    spanMid.textContent = exParts[1];
    exDiv.appendChild(spanMid);

    const input2 = document.createElement("input");
    input2.type = "text";
    input2.dataset.word = w.parts[1].toLowerCase();
    input2.className = "wordPart";
    exDiv.appendChild(input2);

    const spanEnd = document.createElement("span");
    spanEnd.textContent = exParts[2] ? exParts[2] : "";
    exDiv.appendChild(spanEnd);

  } else {
    let partIdx = 0;
    w.ex.split(" ").forEach(word => {
      if (word.includes("___")) {
        const wordsArray = w.parts[partIdx].split(" ");
        wordsArray.forEach(wPart => {
          const input = document.createElement("input");
          input.type = "text";
          input.dataset.word = wPart.toLowerCase();
          input.className = "wordPart";
          exDiv.appendChild(input);
          exDiv.appendChild(document.createTextNode(" "));
        });
        partIdx++;
      } else {
        const span = document.createElement("span");
        span.textContent = word;
        span.className = "wordSpan";
        span.dataset.word = word.replace(/[.,!?]/g, "").toLowerCase();
        exDiv.appendChild(span);
        exDiv.appendChild(document.createTextNode(" "));
      }
    });
  }

  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    const inputs = exDiv.querySelectorAll("input");
    let allCorrect = true;
    inputs.forEach(inp => {
      const correctWords = inp.dataset.word.toLowerCase().split(" ");
      const userWords = inp.value.trim().toLowerCase().split(" ");
      const isCorrect = correctWords.length === userWords.length &&
                        correctWords.every((w,i)=>w===userWords[i]);
      if(isCorrect){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
        allCorrect = false;
      }
    });
    const result = document.createElement("div");
    result.className = allCorrect ? "correct" : "wrong";
    result.textContent = allCorrect ? "Korrekt!" : "Forkert!";
    exDiv.appendChild(result);
    setTimeout(()=>result.remove(),1500);
  };

  const micBtn = document.createElement("button");
  micBtn.textContent = "üéôÔ∏è L√¶s h√∏jt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();
    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(word && spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else if(word){
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "‚ñ∂Ô∏è H√∏r original";
  
  const speedWrapper = document.createElement("div");
  speedWrapper.style.display = "flex";
  speedWrapper.style.alignItems = "center";
  speedWrapper.style.gap = "6px";

  const speedSlider = document.createElement("input");
  speedSlider.type = "range";
  speedSlider.min = "0.5";
  speedSlider.max = "1.5";
  speedSlider.step = "0.1";
  speedSlider.value = "1";
  speedSlider.className = "speedControl";

  const speedLabel = document.createElement("span");
  speedLabel.textContent = speedSlider.value + "x";
  speedLabel.style.fontSize = "0.9em";
  speedLabel.style.color = "#444";

  speedSlider.addEventListener("input", () => {
    speedLabel.textContent = speedSlider.value + "x";
  });

  playOrigBtn.onclick = () => {
    const utterance = new SpeechSynthesisUtterance(
      w.ex.replace(/___/g, ()=>w.parts.join(" "))
    );
    utterance.lang = "da-DK";
    utterance.rate = parseFloat(speedSlider.value);
    window.speechSynthesis.speak(utterance);
  };

  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(playOrigBtn);

  speedWrapper.appendChild(speedSlider);
  speedWrapper.appendChild(speedLabel);
  div.appendChild(speedWrapper);

  container.appendChild(div);
});

document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>