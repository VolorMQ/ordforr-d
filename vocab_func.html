<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Tr√¶ning af ordforr√•d funktionsord(DA‚ÜíRU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* –∑–µ–ª—ë–Ω—ã–π */
.wrong { background-color: #f7c5c5; }   /* –∫—Ä–∞—Å–Ω—ã–π */
.wordSpan { margin-right: 3px; }
</style>
</head>
<body>
<h2>Tr√¶ning af ordforr√•d funktionsord(DA‚ÜíRU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle overs√¶ttelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
  // --- –°–æ—é–∑—ã, —á–∞—Å—Ç–∏—Ü—ã, –ø—Ä–µ–¥–ª–æ–≥–∏ ---
  { da: "at", ru: "—á—Ç–æ, —á—Ç–æ–±—ã", ex: "Jeg vil gerne ___ spise.", parts: ["at"] },
  { da: "af", ru: "–æ—Ç, –∏–∑", ex: "Han er bange ___ hunden.", parts: ["af"] },
  { da: "med", ru: "—Å", ex: "Hun g√•r ___ sin ven.", parts: ["med"] },
  { da: "n√•r", ru: "–∫–æ–≥–¥–∞ (–±—É–¥.)", ex: "Jeg ringer ___ jeg kommer hjem.", parts: ["n√•r"] },
  { da: "da", ru: "–∫–æ–≥–¥–∞ (–ø—Ä–æ—à.)", ex: "Jeg var glad ___ jeg s√• dig.", parts: ["da"] },
  { da: "derfor", ru: "–ø–æ—ç—Ç–æ–º—É", ex: "Det regner, ___ jeg bliver hjemme.", parts: ["derfor"] },
  { da: "p√•", ru: "–Ω–∞", ex: "Bogen ligger ___ bordet.", parts: ["p√•"] },
  { da: "til", ru: "–∫, –¥–ª—è", ex: "Jeg g√•r ___ skolen.", parts: ["til"] },
  { da: "og", ru: "–∏", ex: "Han k√∏ber kaffe ___ te.", parts: ["og"] },
  { da: "i", ru: "–≤", ex: "Jeg bor ___ Danmark.", parts: ["i"] },
  { da: "for", ru: "–¥–ª—è, –∏–±–æ", ex: "Han kom ikke, ___ han var syg.", parts: ["for"] },
  { da: "om", ru: "–æ, –µ—Å–ª–∏", ex: "Vi taler ___ vejret.", parts: ["om"] },
  { da: "men", ru: "–Ω–æ", ex: "Jeg vil gerne g√•, ___ jeg er tr√¶t.", parts: ["men"] },
  { da: "eller", ru: "–∏–ª–∏", ex: "Vil du have kaffe ___ te?", parts: ["eller"] },
  { da: "ogs√•", ru: "—Ç–æ–∂–µ", ex: "Hun er tr√¶t, og jeg er ___ tr√¶t.", parts: ["ogs√•"] },
  { da: "bare", ru: "–ø—Ä–æ—Å—Ç–æ, –ª–∏—à—å –±—ã", ex: "Det var ___ for sjov.", parts: ["bare"] },

  // --- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ---
  { da: "b√•de ... og", ru: "–∏ ... –∏", ex: "Hun taler ___ dansk ___ engelsk.", parts: ["b√•de", "og"] },
  { da: "hverken ... eller", ru: "–Ω–∏ ... –Ω–∏", ex: "Han drikker ___ kaffe ___ te.", parts: ["hverken", "eller"] },

  // --- –ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è ---
  { da: "vi", ru: "–º—ã", ex: "___ g√•r i skole.", parts: ["vi"] },
  { da: "jeg", ru: "—è", ex: "___ hedder Anna.", parts: ["jeg"] },
  { da: "du", ru: "—Ç—ã", ex: "___ er min ven.", parts: ["du"] },
  { da: "han", ru: "–æ–Ω", ex: "___ spiller fodbold.", parts: ["han"] },
  { da: "hun", ru: "–æ–Ω–∞", ex: "___ l√¶ser en bog.", parts: ["hun"] },
  { da: "man", ru: "—á–µ–ª–æ–≤–µ–∫ / –±–µ–∑–ª–∏—á–Ω–æ", ex: "___ siger, at vejret er d√•rligt.", parts: ["man"] },
  { da: "mig", ru: "–º–µ–Ω—è/–º–Ω–µ", ex: "Kan du hj√¶lpe ___?", parts: ["mig"] },
  { da: "dig", ru: "—Ç–µ–±—è/—Ç–µ–±–µ", ex: "Jeg savner ___.", parts: ["dig"] },
  { da: "sig", ru: "—Å–µ–±—è", ex: "Han vasker ___.", parts: ["sig"] },
  { da: "dem", ru: "–∏—Ö, –∏–º", ex: "Jeg kender ___.", parts: ["dem"] },
  { da: "vores", ru: "–Ω–∞—à", ex: "Det er ___ hus.", parts: ["vores"] },
  { da: "jeres", ru: "–≤–∞—à", ex: "Det er ___ bil.", parts: ["jeres"] },
  { da: "sin", ru: "—Å–≤–æ–π (3-–µ –ª–∏—Ü–æ)", ex: "Hun elsker ___ kat.", parts: ["sin"] },
  { da: "mit", ru: "–º–æ–π (n)", ex: "Det er ___ hus.", parts: ["mit"] },
  { da: "dit", ru: "—Ç–≤–æ–π (n)", ex: "Hvor er ___ v√¶relse?", parts: ["dit"] },
  { da: "hans", ru: "–µ–≥–æ", ex: "Det er ___ hund.", parts: ["hans"] },
  { da: "hendes", ru: "–µ—ë", ex: "Jeg s√• ___ taske.", parts: ["hendes"] },

  // --- –ù–∞—Ä–µ—á–∏—è ---
  { da: "igen", ru: "—Å–Ω–æ–≤–∞", ex: "Vi ses ___.", parts: ["igen"] },
  { da: "aldrig", ru: "–Ω–∏–∫–æ–≥–¥–∞", ex: "Han kommer ___ for sent.", parts: ["aldrig"] },
  { da: "altid", ru: "–≤—Å–µ–≥–¥–∞", ex: "Hun er ___ glad.", parts: ["altid"] },
  { da: "m√•", ru: "–º–æ–∂–Ω–æ, –¥–æ–ª–∂–µ–Ω", ex: "Du ___ ikke ryge her.", parts: ["m√•"] },
  { da: "skal", ru: "–¥–æ–ª–∂–µ–Ω", ex: "Jeg ___ i skole i morgen.", parts: ["skal"] },
  { da: "kan", ru: "–º–æ–∂–µ—Ç", ex: "Hun ___ tale fransk.", parts: ["kan"] },
  { da: "vil", ru: "—Ö–æ—á–µ—Ç", ex: "Jeg ___ gerne l√¶re dansk.", parts: ["vil"] },
  { da: "ja", ru: "–¥–∞", ex: "___, jeg vil gerne.", parts: ["ja"] },
  { da: "nej", ru: "–Ω–µ—Ç", ex: "___, jeg kan ikke.", parts: ["nej"] },
  { da: "nogen", ru: "–∫—Ç–æ-—Ç–æ, –∫–∞–∫–∏–µ-—Ç–æ", ex: "Kender du ___ her?", parts: ["nogen"] },
  { da: "noget", ru: "—á—Ç–æ-—Ç–æ", ex: "Der er ___ p√• bordet.", parts: ["noget"] },

  // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã ---
  { da: "er", ru: "–µ—Å—Ç—å, —è–≤–ª—è–µ—Ç—Å—è", ex: "Hun ___ l√¶rer.", parts: ["er"] },
  { da: "var", ru: "–±—ã–ª", ex: "Han ___ syg i g√•r.", parts: ["var"] },
  { da: "har", ru: "–∏–º–µ–µ—Ç", ex: "Jeg ___ en bog.", parts: ["har"] },
  { da: "havde", ru: "–∏–º–µ–ª", ex: "Vi ___ travlt i g√•r.", parts: ["havde"] },
  { da: "bliver", ru: "—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è", ex: "Det ___ koldt i aften.", parts: ["bliver"] },
  { da: "blev", ru: "—Å—Ç–∞–ª", ex: "Han ___ glad.", parts: ["blev"] },
  { da: "er blevet", ru: "—Å—Ç–∞–ª (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)", ex: "Han ___ syg.", parts: ["er", "blevet"] },

  // --- Hv-ord ---
  { da: "hvad", ru: "—á—Ç–æ", ex: "___ laver du?", parts: ["hvad"] },
  { da: "hvem", ru: "–∫—Ç–æ", ex: "___ er han?", parts: ["hvem"] },
  { da: "hvor", ru: "–≥–¥–µ", ex: "___ bor du?", parts: ["hvor"] },
  { da: "hvorn√•r", ru: "–∫–æ–≥–¥–∞", ex: "___ kommer du?", parts: ["hvorn√•r"] },
  { da: "hvorfor", ru: "–ø–æ—á–µ–º—É", ex: "___ griner du?", parts: ["hvorfor"] },
  { da: "hvordan", ru: "–∫–∞–∫", ex: "___ g√•r det?", parts: ["hvordan"] },
  { da: "hvilken", ru: "–∫–∞–∫–æ–π (en)", ex: "___ bog l√¶ser du?", parts: ["hvilken"] },
  { da: "hvilket", ru: "–∫–∞–∫–æ–π (et)", ex: "___ hus er dit?", parts: ["hvilket"] },
  { da: "hvilke", ru: "–∫–∞–∫–∏–µ (–º–Ω.—á.)", ex: "___ film kan du lide?", parts: ["hvilke"] }
];


const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");
  const parts = w.parts;
  let partIdx = 0;
  w.ex.split(" ").forEach(word => {
    if(word.includes("___")) {
      const input = document.createElement("input");
      input.type = "text";
      input.dataset.word = parts[partIdx].toLowerCase();
      partIdx++;
      exDiv.appendChild(input);
      exDiv.appendChild(document.createTextNode(" "));
    } else {
      const span = document.createElement("span");
      span.textContent = word;
      span.className = "wordSpan";
      span.dataset.word = word.replace(/[.,!?]/g,"").toLowerCase();
      exDiv.appendChild(span);
      exDiv.appendChild(document.createTextNode(" "));
    }
  });

  // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–æ–¥–∞
  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    exDiv.querySelectorAll("input").forEach(inp => {
      if(inp.value.trim().toLowerCase() === inp.dataset.word){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
      }
    });
  };

  // üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
  const micBtn = document.createElement("button");
  micBtn.textContent = "üéôÔ∏è L√¶s h√∏jt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();

    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else {
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  // ‚è∫Ô∏è –ó–∞–ø–∏—Å—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞
  const recordBtn = document.createElement("button");
  recordBtn.textContent = "‚è∫Ô∏è Optag og spil";
  let audioBlob = null;

  recordBtn.onclick = async () => {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    const mediaRecorder = new MediaRecorder(stream);
    let chunks = [];
    mediaRecorder.ondataavailable = e => chunks.push(e.data);
    mediaRecorder.onstop = () => {
      audioBlob = new Blob(chunks, { type: 'audio/webm' });
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      audio.play();
    };
    mediaRecorder.start();
    setTimeout(() => mediaRecorder.stop(), 3000); // –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 3 —Å–µ–∫
  };

  // üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "‚ñ∂Ô∏è H√∏r original";
  playOrigBtn.onclick = () => {
    const utterance = new SpeechSynthesisUtterance(w.ex.replace(/___/g, w.parts.join(" ")));
    utterance.lang = "da-DK";
    window.speechSynthesis.speak(utterance);
  };

  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(recordBtn);
  div.appendChild(playOrigBtn);
  container.appendChild(div);
});

// —Å–∫—Ä—ã—Ç–∏–µ —Å–ª–æ–≤ / –ø–µ—Ä–µ–≤–æ–¥–æ–≤
document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>
