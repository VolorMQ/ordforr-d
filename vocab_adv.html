<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Tr√¶ning af ordforr√•d adverbier(DA‚ÜíRU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* –∑–µ–ª—ë–Ω—ã–π */
.wrong { background-color: #f7c5c5; }   /* –∫—Ä–∞—Å–Ω—ã–π */
.wordSpan { margin-right: 3px; }
</style>
</head>
<body>
<h2>Tr√¶ning af ordforr√•d adverbier(DA‚ÜíRU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle overs√¶ttelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
  // --- –°–æ—é–∑—ã, —á–∞—Å—Ç–∏—Ü—ã, –ø—Ä–µ–¥–ª–æ–≥–∏ ---
  { da: "her", ru: "–∑–¥–µ—Å—å", ex: "Jeg bor ___.", parts: ["her"] },
  { da: "der", ru: "—Ç–∞–º", ex: "Han st√•r ___.", parts: ["der"] },
  { da: "nu", ru: "—Å–µ–π—á–∞—Å", ex: "Vi g√•r ___.", parts: ["nu"] },
  { da: "snart", ru: "—Å–∫–æ—Ä–æ", ex: "Bussen kommer ___.", parts: ["snart"] },
  { da: "ofte", ru: "—á–∞—Å—Ç–æ", ex: "Hun bes√∏ger os ___.", parts: ["ofte"] },
  { da: "aldrig", ru: "–Ω–∏–∫–æ–≥–¥–∞", ex: "Jeg har ___ v√¶ret i Paris.", parts: ["aldrig"] },
  { da: "altid", ru: "–≤—Å–µ–≥–¥–∞", ex: "Han er ___ glad.", parts: ["altid"] },
  { da: "m√•ske", ru: "–º–æ–∂–µ—Ç –±—ã—Ç—å", ex: "___ kommer han senere.", parts: ["m√•ske"] },
  { da: "ofte", ru: "—á–∞—Å—Ç–æ", ex: "Vi spiser ___ p√• restauranten.", parts: ["ofte"] },
  { da: "sammen", ru: "–≤–º–µ—Å—Ç–µ", ex: "Vi g√•r ___ i skole.", parts: ["sammen"] },
  { da: "allerede", ru: "—É–∂–µ", ex: "Jeg har ___ spist.", parts: ["allerede"] },
  { da: "stadig", ru: "–≤—Å—ë –µ—â—ë", ex: "Han sover ___.", parts: ["stadig"] },
  { da: "m√•", ru: "–º–æ–∂–Ω–æ, –¥–æ–ª–∂–µ–Ω", ex: "Du ___ ikke ryge her.", parts: ["m√•"] },
  { da: "ligesom", ru: "–∫–∞–∫ –±—ã, —Å–ª–æ–≤–Ω–æ", ex: "Han taler ___ en l√¶rer.", parts: ["ligesom"] },
  { da: "forsigtigt", ru: "–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ", ex: "G√• ___ over vejen.", parts: ["forsigtigt"] },
  { da: "pludselig", ru: "–≤–¥—Ä—É–≥", ex: "___ begyndte det at regne.", parts: ["pludselig"] },
  { da: "meget", ru: "–æ—á–µ–Ω—å", ex: "Hun er ___ glad.", parts: ["meget"] },
  { da: "lidt", ru: "–Ω–µ–º–Ω–æ–≥–æ", ex: "Jeg taler ___ dansk.", parts: ["lidt"] },
  { da: "sikkert", ru: "–Ω–∞–≤–µ—Ä–Ω—è–∫–∞", ex: "Han kommer ___ til festen.", parts: ["sikkert"] },
  { da: "desv√¶rre", ru: "–∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é", ex: "___ kan jeg ikke hj√¶lpe dig.", parts: ["desv√¶rre"] },
  { da: "pligtigt", ru: "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ", ex: "Du skal ___ aflevere opgaven.", parts: ["pligtigt"] },
  { da: "temmelig", ru: "–¥–æ–≤–æ–ª—å–Ω–æ, –≤–µ—Å—å–º–∞", ex: "Hun er ___ tr√¶t.", parts: ["temmelig"] },
  { da: "snildt", ru: "—É–º–µ–ª–æ", ex: "Han l√∏ser opgaven ___ .", parts: ["snildt"] },
  { da: "tilf√¶ldigt", ru: "—Å–ª—É—á–∞–π–Ω–æ", ex: "Jeg m√∏dte ham ___ p√• gaden.", parts: ["tilf√¶ldigt"] },
  { da: "langsomt", ru: "–º–µ–¥–ª–µ–Ω–Ω–æ", ex: "Han g√•r ___ til skole.", parts: ["langsomt"] },
  { da: "hurtigt", ru: "–±—ã—Å—Ç—Ä–æ", ex: "Bilen k√∏rer ___.", parts: ["hurtigt"] },
  { da: "desuden", ru: "–∫ —Ç–æ–º—É –∂–µ", ex: "___ er hun ogs√• dygtig.", parts: ["desuden"] },
  { da: "plads", ru: "–º–µ—Å—Ç–æ (–Ω–∞—Ä–µ—á–∏–µ?), —Å–º. –∫–æ–Ω—Ç–µ–∫—Å—Ç", ex: "Vi st√•r ___ til venstre.", parts: ["plads"] },
  { da: "for det meste", ru: "–ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏", ex: "Vi spiser ude ___.", parts: ["for det meste"] },
  { da: "ofte nok", ru: "–¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ", ex: "Hun bes√∏ger os ___ .", parts: ["ofte nok"] },
  { da: "s√¶rligt", ru: "–æ—Å–æ–±–µ–Ω–Ω–æ", ex: "Han er ___ dygtig til matematik.", parts: ["s√¶rligt"] },
  { da: "umuligt", ru: "–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ", ex: "Det er ___ at forst√•.", parts: ["umuligt"] },
  { da: "pr√¶cist", ru: "—Ç–æ—á–Ω–æ", ex: "Han gjorde det ___ som jeg sagde.", parts: ["pr√¶cist"] },
  { da: "langs", ru: "–≤–¥–æ–ª—å", ex: "Vi gik ___ floden.", parts: ["langs"] },
  { da: "omkring", ru: "–æ–∫–æ–ª–æ", ex: "Der var ___ 50 mennesker.", parts: ["omkring"] },
  { da: "b√•de", ru: "–∫–∞–∫‚Ä¶—Ç–∞–∫ –∏", ex: "___ b√∏rnene ___ voksne var glade.", parts: ["b√•de","og"] }
];


const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");
  const parts = w.parts;
  let partIdx = 0;
  w.ex.split(" ").forEach(word => {
    if(word.includes("___")) {
      const input = document.createElement("input");
      input.type = "text";
      input.dataset.word = parts[partIdx].toLowerCase();
      partIdx++;
      exDiv.appendChild(input);
      exDiv.appendChild(document.createTextNode(" "));
    } else {
      const span = document.createElement("span");
      span.textContent = word;
      span.className = "wordSpan";
      span.dataset.word = word.replace(/[.,!?]/g,"").toLowerCase();
      exDiv.appendChild(span);
      exDiv.appendChild(document.createTextNode(" "));
    }
  });

  // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–æ–¥–∞
  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    exDiv.querySelectorAll("input").forEach(inp => {
      if(inp.value.trim().toLowerCase() === inp.dataset.word){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
      }
    });
  };

  // üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
  const micBtn = document.createElement("button");
  micBtn.textContent = "üéôÔ∏è L√¶s h√∏jt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();

    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else {
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  // ‚è∫Ô∏è –ó–∞–ø–∏—Å—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞
  const recordBtn = document.createElement("button");
  recordBtn.textContent = "‚è∫Ô∏è Optag og spil";
  let audioBlob = null;

  recordBtn.onclick = async () => {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    const mediaRecorder = new MediaRecorder(stream);
    let chunks = [];
    mediaRecorder.ondataavailable = e => chunks.push(e.data);
    mediaRecorder.onstop = () => {
      audioBlob = new Blob(chunks, { type: 'audio/webm' });
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      audio.play();
    };
    mediaRecorder.start();
    setTimeout(() => mediaRecorder.stop(), 3000); // –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 3 —Å–µ–∫
  };

  // üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "‚ñ∂Ô∏è H√∏r original";
  playOrigBtn.onclick = () => {
    const utterance = new SpeechSynthesisUtterance(w.ex.replace(/___/g, w.parts.join(" ")));
    utterance.lang = "da-DK";
    window.speechSynthesis.speak(utterance);
  };

  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(recordBtn);
  div.appendChild(playOrigBtn);
  container.appendChild(div);
});

// —Å–∫—Ä—ã—Ç–∏–µ —Å–ª–æ–≤ / –ø–µ—Ä–µ–≤–æ–¥–æ–≤
document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>
